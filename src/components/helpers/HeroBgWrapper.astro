---
import type { ImageMetadata } from "astro";
import { getImage } from "astro:assets";
const { imagePath, class: className } = Astro.props;

const importedImage = `/src/assets/images/${imagePath}`;

const images = import.meta.glob<{ default: ImageMetadata }>("/src/assets/images/*.{jpeg,jpg,png,gif,webp}");
if (!images[importedImage]) throw new Error(`"${importedImage}" does not exist in glob: "src/assets/images/*.{jpeg,jpg,png,gif,webp}"`);

const optimizedBackground = await getImage({
  src: images[importedImage](),
  format: "webp",
});
---

<section style={`background-image: url(${optimizedBackground.src});`} class={className}>
  <div>
    <slot />
  </div>
</section>

<style>
  section {
    display: grid;
    place-items: center start;
    grid-column: edge;
    width: 100%;
    height: 400px;
    background-size: cover;
    background-position: center;
    color: var(--secondary02);
    text-align: center;
    display: grid;
    grid-template-columns: subgrid;
  }
  div {
    grid-column: main;
    background-color: #ffffffd9;
    width: 788px, fit-content;
    padding: 48px 60px;
    border-radius: var(--border-radius);
    p {
      color: #181818;
      font-family: Lato;
      font-size: 16px;
      font-style: normal;
      font-weight: 400;
      line-height: 147.5%; /* 23.6px */
      letter-spacing: 2.32px;
      text-transform: uppercase;
      border-radius: 20px;
      background: #ffcc4a;
      width: fit-content;
      padding: 5px 10px;
      margin: 0 0 10px 0;
    }
    h1 {
      color: #181818;
      font-family: Cabin;
      font-size: 50px;
      font-style: normal;
      font-weight: 700;
      line-height: 116%; /* 58px */
    }
  }
</style>
